ID,Title,Description,Acceptance,Test_Method,Tools,Dev_Status,Review1_Status,Regression_Status,Files,Dependencies,Notes
S1,设计文档：编译器字符串模型与边界（P3）,新增中文设计文档，说明 token/token_string、cstr_pool、string_view 的使用约定（NULL/空串语义、生命周期、禁止模式），并给出迁移策略（哪些地方先改/哪些保持兼容）。,新增 `docs/STRING-HANDLING.md` 且内容覆盖：现状/约束/风险/推荐用法/迁移顺序；不引入行为变更。,manual: review docs,manual,TODO,TODO,TODO,docs/STRING-HANDLING.md,none,none
S2,提供 string_view/大小写无关比较工具并避免 NULL UB,新增轻量 string 工具：`sv_or_empty(const char*)`、`nocase_equal(...)` 等；并为 `nocasecmp_c` 补齐 NULL-safe 的重载，避免把 NULL 传入 `std::string_view` 触发 UB。,新增工具头文件；核心模块编译通过；对外行为不变。,cmake --build build-vs --config Release | ctest --test-dir build-vs -C Release --output-on-failure,manual,TODO,TODO,TODO,include/matiec/string_utils.hpp | absyntax/absyntax.hh,none,none
S3,修复 nocasecmp 误用（当作 equal）并补单测,修复 `list_c::find_element` 与 `get_datatype_info_c::is_arraytype_equal_relaxed()` 中把 “less-than comparator” 当 “equal” 的问题，改用 `nocase_equal`；新增单元测试覆盖（至少覆盖 find_element 的 case-insensitive 匹配）。,新增/更新单测；修复后逻辑语义与注释一致；Windows Release build+ctest 通过。,cmake --build build-vs --config Release | ctest --test-dir build-vs -C Release --output-on-failure,manual,TODO,TODO,TODO,absyntax/absyntax.cc | absyntax_utils/get_datatype_info.cc | tests/unit/test_string_utils.cc | tests/CMakeLists.txt,S2,none
S4,统一 compile_string 临时文件生成（移除 MAX_PATH 固定缓冲区）,重构 `matiec_compile_string` 的临时文件生成：Windows 改用 `std::filesystem::temp_directory_path` + “随机名 + 独占创建” 方案，避免 `GetTempFileNameA/MAX_PATH` 固定缓冲区；保持行为与清理逻辑不变。,Windows/Linux 构建与测试通过；`MatiecApiTest.CompileFromString` 等用例通过；临时文件仍会被清理。,cmake --build build-vs --config Release | ctest --test-dir build-vs -C Release --output-on-failure,manual,TODO,TODO,TODO,src/matiec_lib.cc,S2,none
S5,回归：P3 字符串升级 Pass1,完成 S1-S4 后执行回归：Windows Release 全量 ctest + WSL(ASan+LSan detect_leaks=1) 全量 ctest，并确认 CI（含 linux-x64-sanitizers 的 LSan 门禁）通过。,Windows Release 全量 ctest 通过；WSL(ASan+LSan) 全量 ctest 通过；CI 绿。,wsl: ASAN_OPTIONS=detect_leaks=1 ctest --test-dir build-wsl-asan --output-on-failure | ctest --test-dir build-vs -C Release --output-on-failure,manual,TODO,TODO,TODO,N/A,S1|S2|S3|S4,none

